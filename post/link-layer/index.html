<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Link Layer - COMP3331 Musings</title><meta name=renderer content=webkit><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content=no-transform><meta http-equiv=cache-control content=no-siteapp><meta name=theme-color content=#f8f5ec><meta name=msapplication-navbutton-color content=#f8f5ec><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=#f8f5ec><meta name=author content=z5206677><meta name=description content="Services  Framing and Link Access Flow Control Error Detection Error Correction Half Duplex / Full Duplex  Ethernet  Connectionless - No handshaking Unreliable - No ACKs or NACKs Unslotted CSMA/CD with Binary Backoff  MAC Addresses  aka LAN address / physical address / Ethernet address"><meta name=keywords content=Hugo,theme,even><meta name=generator content="Hugo 0.58.2 with theme even"><link rel=canonical href=../../post/link-layer/><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../manifest.json><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><link href=../../dist/even.c2a46f00.min.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><link rel=stylesheet href=../../css/typedjs.shortcode.css><meta property=og:title content="Link Layer"><meta property=og:description content="Services  Framing and Link Access Flow Control Error Detection Error Correction Half Duplex / Full Duplex  Ethernet  Connectionless - No handshaking Unreliable - No ACKs or NACKs Unslotted CSMA/CD with Binary Backoff  MAC Addresses  aka LAN address / physical address / Ethernet address"><meta property=og:type content=article><meta property=og:url content=/post/link-layer/><meta property=article:published_time content=2020-04-26T18:43:23+10:00><meta property=article:modified_time content=2020-04-26T18:43:23+10:00><meta itemprop=name content="Link Layer"><meta itemprop=description content="Services  Framing and Link Access Flow Control Error Detection Error Correction Half Duplex / Full Duplex  Ethernet  Connectionless - No handshaking Unreliable - No ACKs or NACKs Unslotted CSMA/CD with Binary Backoff  MAC Addresses  aka LAN address / physical address / Ethernet address"><meta itemprop=datePublished content=2020-04-26T18:43:23&#43;10:00><meta itemprop=dateModified content=2020-04-26T18:43:23&#43;10:00><meta itemprop=wordCount content=1086><meta itemprop=keywords content><meta name=twitter:card content=summary><meta name=twitter:title content="Link Layer"><meta name=twitter:description content="Services  Framing and Link Access Flow Control Error Detection Error Correction Half Duplex / Full Duplex  Ethernet  Connectionless - No handshaking Unreliable - No ACKs or NACKs Unslotted CSMA/CD with Binary Backoff  MAC Addresses  aka LAN address / physical address / Ethernet address"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=../../ class=logo>COMP3331 Musings</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=../../><li class=mobile-menu-item>Home</li></a><a href=https://github.com/featherbear/UNSW-COMP3331><li class=mobile-menu-item>GitHub</li></a><a href=../../categories/><li class=mobile-menu-item>Categories</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=../../ class=logo>COMP3331 Musings</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=../../>Home</a></li><li class=menu-item><a class=menu-item-link href=https://github.com/featherbear/UNSW-COMP3331>GitHub</a></li><li class=menu-item><a class=menu-item-link href=../../categories/>Categories</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Link Layer</h1><div class=post-meta><span class=post-time>2020-04-26</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#services>Services</a></li><li><a href=#ethernet>Ethernet</a><ul><li><a href=#mac-addresses>MAC Addresses</a></li><li><a href=#framing>Framing</a></li></ul></li><li><a href=#error-detection>Error Detection</a><ul><li><a href=#possible-algorithms>Possible Algorithms</a></li></ul></li><li><a href=#multiple-access-links>Multiple Access Links</a><ul><li><a href=#slotted-aloha>Slotted ALOHA</a></li><li><a href=#unslotted-aloha>Unslotted ALOHA</a></li><li><a href=#csma>CSMA</a><ul><li><a href=#collision-detection>Collision Detection</a></li><li><a href=#collision-avoidance>Collision Avoidance</a></li></ul></li></ul></li><li><a href=#arp-address-resolution-protocol>ARP - Address Resolution Protocol</a><ul><li><a href=#arp-connectivity>ARP Connectivity</a></li><li><a href=#arp-poisoning>ARP Poisoning</a><ul><li><a href=#denial-of-service-dos>Denial of Service (DoS)</a></li><li><a href=#man-in-the-middle-mitm>Man In The Middle (MITM)</a></li></ul></li></ul></li><li><a href=#ethernet-switches>Ethernet Switches</a></li></ul></nav></div></div><div class=post-content><h1 id=services>Services</h1><ul><li>Framing and Link Access</li><li>Flow Control</li><li>Error Detection</li><li>Error Correction</li><li>Half Duplex / Full Duplex</li></ul><h1 id=ethernet>Ethernet</h1><ul><li>Connectionless - No handshaking</li><li>Unreliable - No ACKs or NACKs</li><li>Unslotted CSMA/CD with Binary Backoff</li></ul><h2 id=mac-addresses>MAC Addresses</h2><blockquote><p>aka LAN address / physical address / Ethernet address</p></blockquote><p>MAC addresses are unique 48-bit addresses that are written into the ROM of the network adapter. Being in the ROM they cannot be changed (usually).</p><p>Compared to IP addresses, MAC addresses are hard-coded addresses, and have a flat name space.<br>IP addresses on the other hand, are dynamically assigned (DHCP), and operate hierarchically.</p><h2 id=framing>Framing</h2><ul><li>Preamble - seven bytes of <code>0b10101010</code></li><li>Start Frame Delimiter (<code>SFD</code>) - <code>0b10101011</code></li><li>End of Frame - Absence of transition in Manchester encoded signal</li><li>GAP - 12 bytes (96 bits) worth of idling</li></ul><p>Preamble (7 bytes) | SFD (1 bytes) | Destination MAC (6 bytes) | Source MAC (6 bytes) | Type/Length (2 bytes) | Payload (46-1500) bytes | CRC (4 bytes) | GAP</p><h1 id=error-detection>Error Detection</h1><blockquote><p>EDC - Error Detection and Correction.<br>The more EDC bits, the higher the detection and correction rate of bit-errors</p></blockquote><h2 id=possible-algorithms>Possible Algorithms</h2><ul><li><p>Two copies of the same message</p><ul><li>Can detect 3 errors</li><li>Cannot correct them though (unsure which bit was flipped)</li><li>50% overhead</li></ul></li><li><p><code>n</code>-bit even parity</p><ul><li>Every <code>n</code> bits add an extra bit to make the number of 1&rsquo;s even (or odd if using odd parity)</li><li>Can detect but not correct</li></ul></li><li><p>2D Parity</p><ul><li>Split bits into rows and columns</li><li>Parity in rows, and also in columns</li><li>Can detect and correct a single bit</li></ul></li><li><p>Checksums</p><ul><li>Add up data in N-bit words</li><li>Can now detect all burst errors up to <code>N</code></li><li>Cannot correct</li></ul></li><li><p>Cyclic Redundancy Check (CRC)</p><ul><li>Cannot correct</li><li><img src="Screenshot from 2020-04-26 19-00-22.png" alt></li><li><img src="Screenshot from 2020-04-26 19-01-04.png" alt></li></ul></li></ul><h1 id=multiple-access-links>Multiple Access Links</h1><ul><li>Point To Point - One device to another device</li><li><p>Broadcast - Shared medium</p></li><li><p>Old - Bus network - Single cable that all devices share</p><ul><li>Needs CSMA/CD</li></ul></li><li><p>New - Star network - Each device connects to a switch device</p><ul><li>Does not need CSMA/CD</li></ul></li><li><p>Collision occurs if two or more signals are received at the same time</p></li><li><p>Protocols are set in place to determine how nodes take turns to transmit</p></li><li><p>Channel Partitioning</p><ul><li>Allocating time / frequency / coding ranges to each device</li><li>TDMA (Time Division Multiple Access)</li><li>Limits time</li><li>FDMA (Frequency Division Multiple Access)</li><li>Limits bandwidth</li></ul></li><li><p>Taking Turns - Wait for the current transmitting device to finish</p><ul><li>Polling - Master / Slave configuration</li><li>Polling overhead, latency, single point of failure (master is down)</li><li>Token</li><li>Token overhead, latency, single point of failure (lost token)</li></ul></li><li><p>Random Access</p><ul><li>Don&rsquo;t try at all to avoid collision, just attempt to send</li><li>Delay the retransmit for a period of times</li><li>i.e <a href=#csma>CSMA/CD</a> and <a href=#csma>CSMA/CA</a></li></ul></li></ul><h2 id=slotted-aloha>Slotted ALOHA</h2><blockquote><p>ALOHA because, it was done in Hawaii&hellip;</p></blockquote><ul><li>Wait for free slot then transmit</li><li><p>If slot was not free, transmit on next slot</p></li><li><p>Con - Slots are wasted (idle slots)</p></li><li><p>Con - Requires some sort of synchronisation clock</p></li><li><p>Only 37% efficiency (1/e = 0.37) - maths.</p></li></ul><h2 id=unslotted-aloha>Unslotted ALOHA</h2><ul><li>No synchronisation clock</li><li>1/2e = 0.18 = 18% efficiency</li></ul><h2 id=csma>CSMA</h2><blockquote><p>Carrier Sense Multiple Access - Listen before transmission!</p></blockquote><p>When multiple devices transmit over the same line (bus), corruption and interference will occur.</p><p>NOTE: This applies only to mediums that are shared - ie WiFi, or old network busses.<br>With modern wired Ethernet, each line is connected to a switch - and there is only ever one device communicating over the Ethernet cable.<br>(There are two pairs of Ethernet cables - one for receiving and one for transmitting)</p><h3 id=collision-detection>Collision Detection</h3><ul><li>NIC receives datagram from network layer, create fram,e</li><li>NIC senses channel business<ul><li>If idle - transmit</li><li>If busy - wait</li></ul></li><li>While transmitting, if another transmission is detected; abort and send jam signal<ul><li>Wait for a random amount of time before attempting to retransmit</li><li>Binary backoff (exponential) - m&rsquo;th time will choose K at random from {0, 1, 2, 4, 2^m - 1}, and wait for K * 512 bits</li></ul></li></ul><h3 id=collision-avoidance>Collision Avoidance</h3><p>&hellip;</p><h1 id=arp-address-resolution-protocol>ARP - Address Resolution Protocol</h1><p>The ARP protocol is used to map IP addresses to MAC addresses, as like how DNS servers map hostnames to IP addresses.</p><p>As the ARP protocol operates on the Link Layer - there is no known structure to the current network.<br>A device will broadcast an <code>ARP Query</code> to the entire network (Using the broadcast destination address <code>FF:FF:FF:FF:FF:FF</code>).<br>This query contains the IP address of a target MAC address.</p><p>All devices on the network will receive this ARP Query packet, but only the device whose IP address matches will reply - directly back to the requestor (unicast).</p><p>When the reply arrives, it will be cached for a period of time, before that IP-to-MAC entry expires</p><h2 id=arp-connectivity>ARP Connectivity</h2><p>When packets are transmitted, they are regularly encapsulated (IP frame being wrapped in an Ethernet frame) and de-encapsulated (Ethernet frame removed, leaving the IP frame). When a network interface receives a packet, it will de-encapsulate the packet - giving the IP packet.<br>It can then be processed, and if need be - transmitted to another device.</p><p>At each step, the MAC source and destination of the packet is different. However the underlying IP packet remains the same.</p><h2 id=arp-poisoning>ARP Poisoning</h2><h3 id=denial-of-service-dos>Denial of Service (DoS)</h3><p>A malicious device replies to ARP Queries with fake MAC addresses.<br>The requesting device will receive this query, and attempt to send a packet to a non-existent device</p><h3 id=man-in-the-middle-mitm>Man In The Middle (MITM)</h3><p>A malicious device replies to an ARP Query with its own MAC.<br>The requesting device will receive the malicious device&rsquo;s MAC, and send all its data to the malicious device.<br>The malicious device then has access to the data being transmitted and received from the requesting device.</p><h1 id=ethernet-switches>Ethernet Switches</h1><p>Ethernet switches are link-layer devices that store and forward Ethernet frames to the right place.<br>They provide each host connected with a dedicated full-duplex Ethernet link.<br>To hosts on the network, switches are transparent.</p><p>They store entries of requested MAC addresses and the correct link interface in a <strong>switch table</strong>.<br>When frame is received, the MAC address and link interface of the frame is compared against its table to see where to forward the frame to.</p><ul><li>For frames that need to be forwarded to the link interface where they just came from - they are dropped</li><li>For frames that need to be forwarded to another link interface - they are forwarded</li><li>For frames that do not match any entry in the switch table - They are flooded / transmitted to all other interfaces</li></ul><p><img src="Screenshot from 2020-04-28 21-57-19.png" alt></p><p><em>Note: Ethernet hubs are link-layer devices that store and forward Ethernet frames to every interface it is connected to.</em></p></div><footer class=post-footer><nav class=post-nav><a class=prev href=../../post/network-layer-control-plane/><i class="iconfont icon-left"></i><span class="prev-text nav-default">Network Layer - Control Plane</span>
<span class="prev-text nav-mobile">Prev</span></a>
<a class=next href=../../post/wireless-links-and-networks/><span class="next-text nav-default">Wireless Links and Networks</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:z5206677@student.unsw.edu.au class="iconfont icon-email" title=email></a><a href=https://www.linkedin.com/in/andrewjinmengwong/ class="iconfont icon-linkedin" title=linkedin></a><a href=https://github.com/featherbear class="iconfont icon-github" title=github></a><a href=https://www.instagram.com/_andrewjwong/ class="iconfont icon-instagram" title=instagram></a><a href=../../index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Andrew Wong (z5206677)</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script type=text/javascript src=../../dist/even.26188efa.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-107434487-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=../../js/typed.js@2.0.9></script><script src=../../js/typedjs.shortcode.js></script></body></html>