<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Lab 04 - Exploring TCP - COMP3331 Musings</title><meta name=renderer content=webkit><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content=no-transform><meta http-equiv=cache-control content=no-siteapp><meta name=theme-color content=#f8f5ec><meta name=msapplication-navbutton-color content=#f8f5ec><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=#f8f5ec><meta name=author content=z5206677><meta name=description content="Exercise 1: Understanding TCP using Wireshark File: tcp-ethereal-trace-1"><meta name=keywords content=Hugo,theme,even><meta name=generator content="Hugo 0.58.2 with theme even"><link rel=canonical href=../../post/lab04/><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../manifest.json><link rel=mask-icon href=../../safari-pinned-tab.svg color=#5bbad5><link href=../../dist/even.c2a46f00.min.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><link rel=stylesheet href=../../css/typedjs.shortcode.css><meta property=og:title content="Lab 04 - Exploring TCP"><meta property=og:description content="Exercise 1: Understanding TCP using Wireshark File: tcp-ethereal-trace-1"><meta property=og:type content=article><meta property=og:url content=/post/lab04/><meta property=article:published_time content=2020-03-29T22:09:58+11:00><meta property=article:modified_time content=2020-03-29T22:09:58+11:00><meta itemprop=name content="Lab 04 - Exploring TCP"><meta itemprop=description content="Exercise 1: Understanding TCP using Wireshark File: tcp-ethereal-trace-1"><meta itemprop=datePublished content=2020-03-29T22:09:58&#43;11:00><meta itemprop=dateModified content=2020-03-29T22:09:58&#43;11:00><meta itemprop=wordCount content=1063><meta itemprop=keywords content><meta name=twitter:card content=summary><meta name=twitter:title content="Lab 04 - Exploring TCP"><meta name=twitter:description content="Exercise 1: Understanding TCP using Wireshark File: tcp-ethereal-trace-1"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=../../ class=logo>COMP3331 Musings</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=../../><li class=mobile-menu-item>Home</li></a><a href=https://github.com/featherbear/UNSW-COMP3331><li class=mobile-menu-item>GitHub</li></a><a href=../../categories/><li class=mobile-menu-item>Categories</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=../../ class=logo>COMP3331 Musings</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=../../>Home</a></li><li class=menu-item><a class=menu-item-link href=https://github.com/featherbear/UNSW-COMP3331>GitHub</a></li><li class=menu-item><a class=menu-item-link href=../../categories/>Categories</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Lab 04 - Exploring TCP</h1><div class=post-meta><span class=post-time>2020-03-29</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#exercise-1-understanding-tcp-using-wireshark>Exercise 1: Understanding TCP using Wireshark</a><ul><li><a href=#what-is-the-ip-address-of-gaia-cs-umass-edu>What is the IP address of gaia.cs.umass.edu?</a></li><li><a href=#on-what-port-number-is-it-sending-and-receiving-tcp-segments-for-this-connection>On what port number is it sending and receiving TCP segments for this connection?</a></li><li><a href=#what-is-the-ip-address-and-tcp-port-number-used-by-the-client-computer-source-that-is-transferring-the-file-to-gaia-cs-umass-edu>What is the IP address and TCP port number used by the client computer (source) that is transferring the file to gaia.cs.umass.edu?</a></li><li><a href=#what-is-the-sequence-number-of-the-tcp-segment-containing-the-http-post-command>What is the sequence number of the TCP segment containing the HTTP POST command?</a></li><li><a href=#consider-the-tcp-segment-containing-the-http-post-as-the-first-segment-in-the-tcp-connection>Consider the TCP segment containing the HTTP POST as the first segment in the TCP connection.</a></li><li><a href=#what-is-the-length-of-each-of-the-first-six-tcp-segments>What is the length of each of the first six TCP segments?</a></li><li><a href=#what-is-the-minimum-amount-of-available-buffer-space-advertised-at-the-receiver-for-the-entire-trace>What is the minimum amount of available buffer space advertised at the receiver for the entire trace?</a></li><li><a href=#does-the-lack-of-receiver-buffer-space-ever-throttle-the-sender>Does the lack of receiver buffer space ever throttle the sender?</a></li><li><a href=#are-there-any-retransmitted-segments-in-the-trace-file-what-did-you-check-for-in-the-trace-in-order-to-answer-this-question>Are there any retransmitted segments in the trace file? What did you check for (in the trace) in order to answer this question?</a></li><li><a href=#how-much-data-does-the-receiver-typically-acknowledge-in-an-ack>How much data does the receiver typically acknowledge in an ACK?</a></li><li><a href=#what-is-the-throughput-bytes-transferred-per-unit-time-for-the-tcp-connection>What is the throughput (bytes transferred per unit time) for the TCP connection?</a><ul><li><a href=#to-calculate-size-sequence-number-delta>To calculate size: sequence number delta</a></li><li><a href=#to-calculate-time-delta>To calculate time: delta</a></li><li><a href=#to-calculate-throughput>To calculate throughput</a></li></ul></li></ul></li><li><a href=#exercise-2-tcp-connection-management>Exercise 2: TCP Connection Management</a><ul><li><a href=#what-is-the-sequence-number-of-the-tcp-syn-segment-that-is-used-to-initiate-the-tcp-connection-between-the-client-computer-and-server>What is the sequence number of the TCP SYN segment that is used to initiate the TCP connection between the client computer and server?</a></li><li><a href=#what-is-the-sequence-number-of-the-synack-segment-sent-by-the-server-to-the-client-computer-in-reply-to-the-syn>What is the sequence number of the SYNACK segment sent by the server to the client computer in reply to the SYN?</a><ul><li><a href=#what-is-the-value-of-the-acknowledgement-field-in-the-synack-segment-how-did-the-server-determine-that-value>What is the value of the Acknowledgement field in the SYNACK segment? How did the server determine that value?</a></li></ul></li><li><a href=#what-is-the-sequence-number-of-the-ack-segment-sent-by-the-client-computer-in-response-to-the-synack>What is the sequence number of the ACK segment sent by the client computer in response to the SYNACK?</a><ul><li><a href=#what-is-the-value-of-the-acknowledgment-field-in-this-ack-segment-does-this-segment-contain-any-data>What is the value of the Acknowledgment field in this ACK segment? Does this segment contain any data?</a></li></ul></li><li><a href=#who-has-done-the-active-close-client-or-the-server>Who has done the active close - client or the server?</a></li><li><a href=#how-many-data-bytes-have-been-transferred-from-the-client-to-the-server-and-from-the-server-to-the-client-during-the-whole-duration-of-the-connection>How many data bytes have been transferred from the client to the server and from the server to the client during the whole duration of the connection?</a></li></ul></li></ul></nav></div></div><div class=post-content><h1 id=exercise-1-understanding-tcp-using-wireshark>Exercise 1: Understanding TCP using Wireshark</h1><p>File: <a href=./tcp-ethereal-trace-1>tcp-ethereal-trace-1</a></p><h2 id=what-is-the-ip-address-of-gaia-cs-umass-edu>What is the IP address of gaia.cs.umass.edu?</h2><p><code>gaia.cs.umass.edu</code> has an IP address of <code>128.119.245.12</code>.</p><h2 id=on-what-port-number-is-it-sending-and-receiving-tcp-segments-for-this-connection>On what port number is it sending and receiving TCP segments for this connection?</h2><p>The server is using port <code>80</code> for its communication.</p><h2 id=what-is-the-ip-address-and-tcp-port-number-used-by-the-client-computer-source-that-is-transferring-the-file-to-gaia-cs-umass-edu>What is the IP address and TCP port number used by the client computer (source) that is transferring the file to gaia.cs.umass.edu?</h2><p>The source computer has an IP address of <code>192.168.1.102</code>, and is using port <code>1161</code></p><h2 id=what-is-the-sequence-number-of-the-tcp-segment-containing-the-http-post-command>What is the sequence number of the TCP segment containing the HTTP POST command?</h2><blockquote><p>Note that in order to find the POST command, you’ll need to dig into the packet content field at the bottom of the Wireshark window, looking for a segment with a “POST” within its DATA field.</p></blockquote><p>Sequence number <code>232129013</code> (Packet #4) is the TCP segment which contains the POST command</p><h2 id=consider-the-tcp-segment-containing-the-http-post-as-the-first-segment-in-the-tcp-connection>Consider the TCP segment containing the HTTP POST as the first segment in the TCP connection.</h2><ul><li>What are the sequence numbers of the first six segments in the TCP connection (including the segment containing the HTTP POST) sent from the client to the web server?<ul><li>Do not consider the ACKs received from the server as part of these six segments.</li></ul></li><li>At what time was each segment sent?<br></li><li>When was the ACK for each segment received?<br></li><li>Given the difference between when each TCP segment was sent, and when its acknowledgement was received, what is the RTT value for each of the six segments?</li><li>What is the EstimatedRTT value (see relevant parts of Section 3.5 or lecture slides) after the receipt of each ACK?<ul><li>Assume that the initial value of EstimatedRTT is equal to the measured RTT ( SampleRTT ) for the first segment, and then is computed using the EstimatedRTT equation for all subsequent segments.</li><li>Set alpha to 0.125</li></ul></li></ul><table><thead><tr><th align=right>#</th><th align=center>Seq no</th><th align=center>Time Sent</th><th align=center>Time ACKd</th><th align=center>ACK #</th><th align=center>Sample RTT</th><th align=center>Estimated RTT</th><th align=center>Packet Length</th><th align=center>Payload Length</th></tr></thead><tbody><tr><td align=right>4</td><td align=center><code>232129013</code></td><td align=center>0.026</td><td align=center>0.053</td><td align=center>6</td><td align=center>0.027</td><td align=center>0.027</td><td align=center>619</td><td align=center>565</td></tr><tr><td align=right>5</td><td align=center><code>232129578</code></td><td align=center>0.041</td><td align=center>0.077</td><td align=center>9</td><td align=center>0.036</td><td align=center>0.028</td><td align=center>1514</td><td align=center>1460</td></tr><tr><td align=right>7</td><td align=center><code>232131038</code></td><td align=center>0.054</td><td align=center>0.124</td><td align=center>12</td><td align=center>0.070</td><td align=center>0.04</td><td align=center>1514</td><td align=center>1460</td></tr><tr><td align=right>8</td><td align=center><code>232132498</code></td><td align=center>0.056</td><td align=center>0.169</td><td align=center>13</td><td align=center>0.113</td><td align=center>0.049</td><td align=center>1514</td><td align=center>1460</td></tr><tr><td align=right>10</td><td align=center><code>232133958</code></td><td align=center>0.077</td><td align=center>0.217</td><td align=center>15</td><td align=center>0.140</td><td align=center>0.0.06</td><td align=center>1514</td><td align=center>1460</td></tr><tr><td align=right>11</td><td align=center><code>232135418</code></td><td align=center>0.078</td><td align=center>0.267</td><td align=center>16</td><td align=center>0.189</td><td align=center>0.07</td><td align=center>1514</td><td align=center>1460</td></tr></tbody></table><p>Note: The Estimated RTT can be calculated from the formula:<br><code>eRTT = (1-a) * last_eRTT + a * sampleRTT</code></p><h2 id=what-is-the-length-of-each-of-the-first-six-tcp-segments>What is the length of each of the first six TCP segments?</h2><p>See above.</p><h2 id=what-is-the-minimum-amount-of-available-buffer-space-advertised-at-the-receiver-for-the-entire-trace>What is the minimum amount of available buffer space advertised at the receiver for the entire trace?</h2><p>Packet #2 suggests that the minimum amount of buffer space available is <code>5840</code> (Calculated window size).</p><h2 id=does-the-lack-of-receiver-buffer-space-ever-throttle-the-sender>Does the lack of receiver buffer space ever throttle the sender?</h2><p>No, the sender sends at most only 1514 bytes at a time, which is under the minimum buffer space</p><h2 id=are-there-any-retransmitted-segments-in-the-trace-file-what-did-you-check-for-in-the-trace-in-order-to-answer-this-question>Are there any retransmitted segments in the trace file? What did you check for (in the trace) in order to answer this question?</h2><p>We can look for repeated segment numbers (seq and ack pair) to find if there are any segments that were retransmitted.<br>No repeated segment numbers were found, so we can assume that there are <strong>no retransmitted segments</strong>.</p><h2 id=how-much-data-does-the-receiver-typically-acknowledge-in-an-ack>How much data does the receiver typically acknowledge in an ACK?</h2><blockquote><p>Can you identify cases where the receiver is ACKing every other received segment (recall the discussion about delayed acks from the lecture notes or Section 3.5 of the text).</p></blockquote><p>Typically the receiver acknowledges <code>1460</code> bytes.</p><p>There is a case where packets 54, 55 and 56 are all acknowledged by the single ACK packet 60.<br>This may happen if all three packets arrive simultaneously, and so there is no need to acknowledge each received packet.</p><h2 id=what-is-the-throughput-bytes-transferred-per-unit-time-for-the-tcp-connection>What is the throughput (bytes transferred per unit time) for the TCP connection?</h2><p>We can get the throughput of this connection by calculating the sequence number delta, and dividing it by the time delta.</p><p>Note: We will look at the POST exchange from segment 4 to segment 206, and ignore the beginning connection setup.</p><h3 id=to-calculate-size-sequence-number-delta>To calculate size: sequence number delta</h3><p>The start of the data is segment 4 - seq no 232129013.<br>The end of the server response is segment 206 - seq no 232293103.</p><p>There were 232293103 - 232129013 = 164090 bytes transmitted</p><h3 id=to-calculate-time-delta>To calculate time: delta</h3><p>Segment 4 was transmitted at 0.026s.<br>Segment 206 was transmitted at 5.6511s.</p><p>The time delta is 5.6511 - 0.026 = 5.557 seconds.</p><h3 id=to-calculate-throughput>To calculate throughput</h3><p>164090 bytes / 5.557 seconds is <code>29528.52 bytes/second</code></p><h1 id=exercise-2-tcp-connection-management>Exercise 2: TCP Connection Management</h1><p><img src=Screen_Shot_2018-08-28_at_8.06.30_pm.png alt></p><h2 id=what-is-the-sequence-number-of-the-tcp-syn-segment-that-is-used-to-initiate-the-tcp-connection-between-the-client-computer-and-server>What is the sequence number of the TCP SYN segment that is used to initiate the TCP connection between the client computer and server?</h2><p><code>2818463618</code></p><h2 id=what-is-the-sequence-number-of-the-synack-segment-sent-by-the-server-to-the-client-computer-in-reply-to-the-syn>What is the sequence number of the SYNACK segment sent by the server to the client computer in reply to the SYN?</h2><p><code>1247095790</code></p><h3 id=what-is-the-value-of-the-acknowledgement-field-in-the-synack-segment-how-did-the-server-determine-that-value>What is the value of the Acknowledgement field in the SYNACK segment? How did the server determine that value?</h3><p>The acknowledge number is <code>2818463619</code>.</p><p>The server determines it to be the <code>SYN value + 1</code>.<br>Hence <code>2818463618 + 1 = 2818463619</code></p><h2 id=what-is-the-sequence-number-of-the-ack-segment-sent-by-the-client-computer-in-response-to-the-synack>What is the sequence number of the ACK segment sent by the client computer in response to the SYNACK?</h2><p><code>2818463619</code></p><h3 id=what-is-the-value-of-the-acknowledgment-field-in-this-ack-segment-does-this-segment-contain-any-data>What is the value of the Acknowledgment field in this ACK segment? Does this segment contain any data?</h3><p><code>1247095791</code></p><p><em>Which is <code>1247095790 + 1</code></em></p><p>It doesn&rsquo;t contain any user data</p><h2 id=who-has-done-the-active-close-client-or-the-server>Who has done the active close - client or the server?</h2><ul><li>How you have determined this?</li><li>What type of closure has been performed?<ul><li>3 Segment (FIN/FINACK/ACK)</li><li>4 Segment (FIN/ACK/FIN/ACK)</li><li>Simultaneous close</li></ul></li></ul><p>The client initiated the active close as seen by segment 304.<br>Segment 305 is a response to the active close, as seen by the acknowledgement of sequence number 2818463652 (segment 304).</p><p>This looks like a <code>simultaneous close</code>, as the server sends its own FINACK before it receives the client&rsquo;s FINACK (FINACK from the server has an acknowledgement number of the packet that it will (but hasn&rsquo;t yet) receive from the client).</p><table><thead><tr><th align=center>Handshake Close</th><th align=center>Simultaneous Close</th></tr></thead><tbody><tr><td align=center><img src=http://www.tcpipguide.com/free/diagrams/tcpclose.png alt></td><td align=center><img src=http://www.tcpipguide.com/free/diagrams/tcpclosesimul.png alt></td></tr></tbody></table><h2 id=how-many-data-bytes-have-been-transferred-from-the-client-to-the-server-and-from-the-server-to-the-client-during-the-whole-duration-of-the-connection>How many data bytes have been transferred from the client to the server and from the server to the client during the whole duration of the connection?</h2><blockquote><p>What relationship does this have with the Initial Sequence Number and the final ACK received from the other side?</p></blockquote><p>The <code>final ACK - initial seq number</code> is equal to the number of bytes transferred.</p><p><code>2818463653 - 2818463618 = 35</code> bytes</p></div><footer class=post-footer><nav class=post-nav><a class=prev href=../../post/transport-layer/><i class="iconfont icon-left"></i><span class="prev-text nav-default">Transport Layer</span>
<span class="prev-text nav-mobile">Prev</span></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:z5206677@student.unsw.edu.au class="iconfont icon-email" title=email></a><a href=https://www.linkedin.com/in/andrewjinmengwong/ class="iconfont icon-linkedin" title=linkedin></a><a href=https://github.com/featherbear class="iconfont icon-github" title=github></a><a href=https://www.instagram.com/_andrewjwong/ class="iconfont icon-instagram" title=instagram></a><a href=../../index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Andrew Wong (z5206677)</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script type=text/javascript src=../../dist/even.26188efa.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-107434487-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=../../js/typed.js@2.0.9></script><script src=../../js/typedjs.shortcode.js></script></body></html>